window.__require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var l=c.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({BulletControl:[function(e,t,o){"use strict";cc._RF.push(t,"4425aUjmMlMe4NSDJJirZub","BulletControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=10,t}return __extends(t,e),t.prototype.onLoad=function(){console.log("BulletControl onLoad"),cc.director.getCollisionManager().enabled=!0},t.prototype.onCollisionEnter=function(e,t){console.log("onCollisionEnter",e,t),t.node.destroy()},t.prototype.start=function(){},t.prototype.update=function(e){this.node.y>cc.director.getWinSize().height&&(this.node.destroy(),console.log("BulletControl is distroyed!"))},__decorate([i()],t.prototype,"speed",void 0),t=__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"6df2av4JB5MsYV8CVicRmkh","GameController"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc._decorator,i=r.ccclass,c=r.property;(function(e){e[e.IDLE=0]="IDLE",e[e.MOVE_LEFT=1]="MOVE_LEFT",e[e.MOVE_RIGHT=2]="MOVE_RIGHT"})(n||(n={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab_bullet=null,t.canvas=null,t.speed=.1,t.state=n.IDLE,t.player=null,t.ws=null,t.isConnected=!1,t}return __extends(t,e),t.prototype.onLoad=function(){console.log("GameController start"),this.player=this.node.getChildByName("Player"),this.canvas.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this)),this.canvas.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this))},t.prototype.onTouchStart=function(e){cc.log("GameManager onTouchStart "+e)},t.prototype.onTouchEnd=function(e){cc.log("GameManager onTouchEnd"),this.state=n.IDLE},t.prototype.start=function(){this.ws=new WebSocket("ws://192.168.1.7:8080");var e=this;this.ws.onopen=function(t){console.log("Send Text WS was opened."),e.isConnected=!0},this.ws.onmessage=function(e){console.log("response text msg: "+e.data)},this.ws.onerror=function(e){console.log("Send Text fired an error")},this.ws.onclose=function(e){console.log("WebSocket instance closed.")}},t.prototype.update=function(e){switch(this.state){case n.IDLE:break;case n.MOVE_LEFT:this.player.x-=this.speed*e,this.player.x<0&&(this.player.x=cc.director.getWinSize().width);break;case n.MOVE_RIGHT:this.player.x+=this.speed*e,this.player.x>cc.director.getWinSize().width&&(this.player.x=0)}this.isConnected&&this.ws.send(JSON.stringify({x:this.player.x}))},t.prototype.btnPlay=function(){console.log("btnPlay clicked!"),cc.find("Canvas/GameWorld/UI/MainMenu").active=!1,cc.find("Canvas/GameWorld/UI/Control").active=!0,this.player.active=!0},t.prototype.btnMoveLeft=function(){console.log("btnMoveLeft clicked!"),this.state=n.MOVE_LEFT},t.prototype.btnMoveRight=function(){console.log("btnMoveRight clicked!"),this.state=n.MOVE_RIGHT},t.prototype.btnFire=function(){console.log("btnFire clicked!");var e=cc.instantiate(this.prefab_bullet);e.x=this.player.x,e.y=this.player.y+40,this.node.addChild(e)},__decorate([c(cc.Prefab)],t.prototype,"prefab_bullet",void 0),__decorate([c(cc.Canvas)],t.prototype,"canvas",void 0),__decorate([c()],t.prototype,"speed",void 0),t=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["BulletControl","GameController"]);